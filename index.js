const express = require('express');
// ??????????????????????????????????????????
const path = require('path');
// const fs = require('fs');
// const multer = require('multer');
// const upload = multer({ dest: 'public/images' });
// ??????????????????????????????????????????????????

// import routes
const apiRouter = require('./routes/api');

const app = express();

// ??????????????????????
// app.set('views', path.join(__dirname, 'views'));
app.set('view engine', 'pug');

// ??????????????????????

require('./db');

// MIDDLEWARES
app.use(express.json());
app.use(express.urlencoded({extended: false})) // estaba en true

app.use(express.static(path.join(__dirname, 'public'))); //?

app.use('/api', apiRouter);

// ----------------------------------------------
// Ruta view pug
app.get('/uploadfile', (req, res) => {
    res.render('index');
})

// -------------------------------------


// iniciar con nodemon index.js

app.listen(3000, () => {
    console.log('Servidor funcionando');
});